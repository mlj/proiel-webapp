<%= javascript 'wz_jsgraphics', 'anaphora' %>

<%= render :partial => 'shared/location', :locals => { :sentence => @sentence, :title => 'Annotation', :value => 'Information structure', :edit_url => :sentence_info_status_url } %>

<% if is_annotator? or @sentence.is_reviewed? %>
  <% layer_if(is_reviewer?, "completion", :actions => [
                            link_to_unless(@sentence.is_reviewed?, "Flag as reviewed", :action => 'flag_as_reviewed', :id => @sentence),
                            link_to_if(@sentence.is_reviewed?, "Flag as not reviewed", :action => 'flag_as_not_reviewed', :id => @sentence),
    ] ) do -%>
    <%= format_annotator(@sentence, :time => true) %><br/>
    <%= format_reviewer(@sentence, :time => true) %>
  <% end %>

  <% layer("info-status", :title => "Information structure", :actions => [
    link_to_if(is_annotator?, "Edit", edit_sentence_info_status_url(@sentence))]) do -%>
    <%= render :partial => 'info_statuses/legend_show' %>
    <%= render :partial => 'info_statuses/show' %>
  <% end %>

<% else %>
  Sentence not yet annotated and reviewed.
<% end %>

<script type="text/javascript">
  document.observe('dom:loaded', function() {
    AnaphoraAndContrast.showAntecedentsForAllAnaphors();
  });
</script>
